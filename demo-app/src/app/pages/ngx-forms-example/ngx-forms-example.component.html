<form [formGroup]="formNgxError" (ngSubmit)="onSubmitUserDetails(formNgxError)" class="form-group">
	<div class="mat-display-1">Reactive Forms with NgxFormErrors</div>

	<mat-form-field class="full-width">
		<input matInput [placeholder]="'DEMO.PLACEHOLDERS.USER_NAME' | translate" formControlName="username" required />
		<mat-error>
			<ng-template ngxFormErrors="username" ngxFormErrorsFieldNameTranslation="blabla" #usernameField="ngxFormErrors"></ng-template>
		</mat-error>
	</mat-form-field>

	<div formGroupName="matchingPasswords" class="matching-passwords" ngxFormErrorsGroup="passwords-group">
		<mat-form-field class="full-width">
			<input matInput type="password" [placeholder]="'DEMO.PLACEHOLDERS.PASSWORD' | translate" formControlName="password" required />
			<mat-error> <ng-template ngxFormErrors="matchingPasswords.password" #passwordField="ngxFormErrors"></ng-template> </mat-error>
		</mat-form-field>

		<mat-form-field class="full-width">
			<input
				matInput
				type="password"
				[placeholder]="'DEMO.PLACEHOLDERS.CONFIRM_PASSWORD' | translate"
				formControlName="confirmPassword"
				[errorStateMatcher]="parentErrorStateMatcher"
				required
			/>
			<mat-error>
				<ng-template ngxFormErrors="matchingPasswords.confirmPassword" #confirmPasswordField="ngxFormErrors"></ng-template>
			</mat-error>
		</mat-form-field>
	</div>
	<div class="form-buttons">
		<button color="primary" mat-raised-button type="submit" [disabled]="!formNgxError.valid">Submit</button>
		<button color="primary" mat-raised-button type="button" (click)="getFormStatus()">Get Form status</button>
		<button color="primary" mat-stroked-button type="button" (click)="toggleValidationDetails()">
			{{ showValidationDetails ? "Hide validation details" : "Show validation details" }}
		</button>
		<button color="primary" mat-stroked-button type="button" (click)="toggleValidationSummary()">
			{{ showValidationSummary ? "Hide validation summary" : "Show validation summary" }}
		</button>
	</div>

	<div class="form-validation-info" *ngIf="showValidationDetails">
		<mat-card class="form-field-info">
			<div>Has errors: {{ usernameField.hasErrors }}</div> <div>Has 'required' error: {{ usernameField.hasError("required") }}</div>
			<div>Is valid?: {{ usernameField.isValid() }}</div> <div>Is touched? {{ usernameField.hasState("touched") }}</div>
			<div>
				'required' error: <pre>{{ usernameField.getError("required") | json }}</pre>
			</div>
			<div *ngIf="usernameField.hasErrors">
				Errors: <pre>{{ usernameField.errors | json }}</pre>
			</div>
		</mat-card>
		<mat-card class="form-field-info">
			<div>Has errors: {{ passwordField.hasErrors }}</div> <div>Has 'pattern' error: {{ passwordField.hasError("pattern") }}</div>
			<div>Is pattern valid?: {{ passwordField.isValid("pattern") }}</div>
			<div>Is touched? {{ passwordField.hasState("touched") }}</div>
			<div>
				'pattern' error: <pre>{{ passwordField.getError("pattern") | json }}</pre>
			</div>
			<div *ngIf="passwordField.hasErrors">
				Errors: <pre>{{ passwordField.errors | json }}</pre>
			</div>
		</mat-card>
		<mat-card class="form-field-info">
			<div>Has errors: {{ confirmPasswordField.hasErrors }}</div>
			<div>Has 'required' error: {{ confirmPasswordField.hasError("required") }}</div>
			<div>Is required valid?: {{ confirmPasswordField.isValid("required") }}</div>
			<div>Is touched? {{ confirmPasswordField.hasState("touched") }}</div>
			<div>
				'required' error: <pre>{{ confirmPasswordField.getError("required") | json }}</pre>
			</div>
			<div *ngIf="confirmPasswordField.hasErrors">
				Errors: <pre>{{ confirmPasswordField.errors | json }}</pre>
			</div>
		</mat-card>
	</div>

	<mat-card
		class="form-validation-messages"
		[ngClass]="{ 'no-errors': !usernameField.hasErrors && !passwordField.hasErrors && !confirmPasswordField.hasErrors }"
		*ngIf="showValidationSummary"
	>
		<span *ngIf="!usernameField.hasErrors && !passwordField.hasErrors && !confirmPasswordField.hasErrors">No validation errors</span>
		<!-- TODO: IMPORTANT: the ngIf cannot be used here because it causes some issues with the ErrorComponent created by the ngxFormErrors -->
		<div [hidden]="!usernameField.hasErrors && !passwordField.hasErrors && !confirmPasswordField.hasErrors">
			<span [hidden]="!usernameField.hasErrors"><ng-template ngxFormErrors="username"></ng-template></span>
			<span [hidden]="!passwordField.hasErrors"><ng-template ngxFormErrors="matchingPasswords.password"></ng-template></span>
			<span [hidden]="!confirmPasswordField.hasErrors"
				><ng-template ngxFormErrors="matchingPasswords.confirmPassword"></ng-template
			></span>
		</div>
	</mat-card>
</form>
